(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ac97c"],{"19ca":function(e,t,n){"use strict";n.r(t);n("b0c0");var a=n("7a23"),o={class:"content-box goods-list"},r={class:"btn-group"},i=Object(a["createTextVNode"])("默认排序"),c=Object(a["createTextVNode"])("按销量排序"),s=Object(a["createTextVNode"])("按售价排序"),u=Object(a["createTextVNode"])("按库存排序"),d=Object(a["createTextVNode"])("添加商品"),l=Object(a["createTextVNode"])("查询"),p=Object(a["createTextVNode"])("清空"),m=Object(a["createTextVNode"])("编辑"),g=Object(a["createTextVNode"])("删除");function f(e,t,n,f,b,h){var O=Object(a["resolveComponent"])("a-button"),x=Object(a["resolveComponent"])("a-tab-pane"),j=Object(a["resolveComponent"])("a-tabs"),_=Object(a["resolveComponent"])("a-input"),k=Object(a["resolveComponent"])("a-form-item"),y=Object(a["resolveComponent"])("a-form"),C=Object(a["resolveComponent"])("a-image"),v=Object(a["resolveComponent"])("a-input-number"),w=Object(a["resolveComponent"])("a-switch"),N=Object(a["resolveComponent"])("a-table"),V=Object(a["resolveComponent"])("a-spin");return Object(a["openBlock"])(),Object(a["createBlock"])(V,{spinning:b.spinning},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",o,[Object(a["createVNode"])("div",r,[Object(a["createVNode"])(O,{type:"default"===b.sort?"primary":"default",onClick:t[1]||(t[1]=function(e){return h.changeSort("default")}),style:{"margin-right":"10px"}},{default:Object(a["withCtx"])((function(){return[i]})),_:1},8,["type"]),Object(a["createVNode"])(O,{type:"sale"===b.sort?"primary":"default",onClick:t[2]||(t[2]=function(e){return h.changeSort("sale")}),style:{"margin-right":"10px"}},{default:Object(a["withCtx"])((function(){return[c]})),_:1},8,["type"]),Object(a["createVNode"])(O,{type:"price"===b.sort?"primary":"default",onClick:t[3]||(t[3]=function(e){return h.changeSort("price")}),style:{"margin-right":"10px"}},{default:Object(a["withCtx"])((function(){return[s]})),_:1},8,["type"]),Object(a["createVNode"])(O,{type:"stock"===b.sort?"primary":"default",onClick:t[4]||(t[4]=function(e){return h.changeSort("stock")})},{default:Object(a["withCtx"])((function(){return[u]})),_:1},8,["type"]),Object(a["createVNode"])(O,{style:{float:"right"},type:"primary",onClick:t[5]||(t[5]=function(e){return h.edit("add")})},{default:Object(a["withCtx"])((function(){return[d]})),_:1})]),Object(a["createVNode"])(j,{activeKey:b.status,"onUpdate:activeKey":t[6]||(t[6]=function(e){return b.status=e}),onChange:h.changeStatus,style:{"margin-top":"20px"}},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(x,{key:"1",tab:"全部商品"}),Object(a["createVNode"])(x,{key:"2",tab:"出售中"}),Object(a["createVNode"])(x,{key:"3",tab:"已售完"}),Object(a["createVNode"])(x,{key:"4",tab:"已下架"})]})),_:1},8,["activeKey","onChange"]),Object(a["createVNode"])(y,{modal:b.formData,layout:"inline"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(k,{label:"商品名称"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(_,{value:b.formData.name,"onUpdate:value":t[7]||(t[7]=function(e){return b.formData.name=e}),placeHolder:"请输入商品名称"},null,8,["value"])]})),_:1}),Object(a["createVNode"])(k,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(O,{type:"primary",onClick:t[8]||(t[8]=function(e){return h.getGoodsList(b.sort,b.status,1,b.formData.name)})},{default:Object(a["withCtx"])((function(){return[l]})),_:1})]})),_:1}),Object(a["createVNode"])(k,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(O,{onClick:t[9]||(t[9]=function(e){b.formData.name="",h.getGoodsList(b.sort,b.status,1,b.formData.name)})},{default:Object(a["withCtx"])((function(){return[p]})),_:1})]})),_:1})]})),_:1},8,["modal"]),Object(a["createVNode"])(N,{columns:b.columns,"data-source":b.goodsList,pagination:b.tablePagination,rowKey:function(e){return e.id},style:{"margin-top":"10px"}},{pic:Object(a["withCtx"])((function(e){var t=e.text;return[Object(a["createVNode"])(C,{src:t,fallback:"/images/fallback.png",preview:!1,alt:"商品图片",width:60,height:60},null,8,["src"])]})),sort:Object(a["withCtx"])((function(e){var t=e.record;return[Object(a["createVNode"])(v,{value:t.sort_order,"onUpdate:value":function(e){return t.sort_order=e},min:1,onChange:function(e){return h.changeGoodsStatus("sort",t)}},null,8,["value","onUpdate:value","onChange"])]})),isIndex:Object(a["withCtx"])((function(e){var t=e.record;return[Object(a["createVNode"])(w,{checked:t.is_index,"onUpdate:checked":function(e){return t.is_index=e},onChange:function(e){return h.changeGoodsStatus("index",t)}},null,8,["checked","onUpdate:checked","onChange"])]})),isOnSale:Object(a["withCtx"])((function(e){var t=e.record;return[Object(a["createVNode"])(w,{checked:t.is_on_sale,"onUpdate:checked":function(e){return t.is_on_sale=e},onChange:function(e){return h.changeGoodsStatus("sale",t)}},null,8,["checked","onUpdate:checked","onChange"])]})),operation:Object(a["withCtx"])((function(e){var t=e.record;return[Object(a["createVNode"])(O,{type:"primary",style:{"margin-right":"10px"},onClick:function(e){return h.edit("edit",t)}},{default:Object(a["withCtx"])((function(){return[m]})),_:2},1032,["onClick"]),Object(a["createVNode"])(O,{type:"danger",onClick:function(e){return h.edit("delete",t)}},{default:Object(a["withCtx"])((function(){return[g]})),_:2},1032,["onClick"])]})),expandedRowRender:Object(a["withCtx"])((function(e){var t=e.record;return[Object(a["createVNode"])(N,{columns:b.innerColumns,"data-source":t.product,pagination:!1,size:"small"},null,8,["columns","data-source"])]})),_:1},8,["columns","data-source","pagination","rowKey"])])]})),_:1},8,["spinning"])}var b=n("1da1"),h=(n("96cf"),{name:"GoodsList",data:function(){var e=this;return{spinning:!1,sort:"default",status:"2",formData:{name:""},columns:[{title:"ID",dataIndex:"id",key:"id"},{title:"商品图片",dataIndex:"list_pic_url",key:"list_pic_url",slots:{customRender:"pic"}},{title:"商品名称",dataIndex:"name",key:"name"},{title:"分类",dataIndex:"category_name",key:"category_name"},{title:"排序",dataIndex:"sort_order",key:"sort_order",slots:{customRender:"sort"}},{title:"销量",dataIndex:"sell_volume",key:"sell_volume"},{title:"库存",dataIndex:"goods_number",key:"goods_number"},{title:"首页显示",dataIndex:"is_index",key:"is_index",slots:{customRender:"isIndex"}},{title:"上架",dataIndex:"is_on_sale",key:"is_on_sale",slots:{customRender:"isOnSale"}},{title:"操作",key:"operation",slots:{customRender:"operation"}}],innerColumns:[{title:"ID",dataIndex:"id",key:"id"},{title:"商品SKU",dataIndex:"goods_sn",key:"goods_sn"},{title:"快递单上的简称",dataIndex:"goods_name",key:"goods_name"},{title:"型号/规格",dataIndex:"value",key:"value"},{title:"成本(元)",dataIndex:"cost",key:"cost"},{title:"零售(元)",dataIndex:"retail_price",key:"retail_price"},{title:"重量(KG)",dataIndex:"goods_weight",key:"goods_weight"},{title:"库存",dataIndex:"goods_number",key:"goods_number"}],tablePagination:{defaultPageSize:20,hideOnSinglePage:!0,showQuickJumper:!0,showTotal:function(e){return"共 ".concat(e," 条")},total:0,onChange:function(t){e.getGoodsList(e.sort,e.status,t,e.formData.name),e.page=t}},page:1,goodsList:[]}},methods:{getGoodsList:function(e,t,n,a){var o=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o.spinning=!0,r.prev=1,r.next=4,o.$axios({method:o.$api.GET_GOODS_LIST.method,url:o.$api.GET_GOODS_LIST.url,params:{sort:e,status:t,page:n,name:a}});case 4:i=r.sent,o.goodsList=i.data.list,o.tablePagination.total=i.data.count,o.spinning=!1,r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](1),console.log("获取商品列表失败。[getGoodsList]",r.t0),o.spinning=!1;case 14:case"end":return r.stop()}}),r,null,[[1,10]])})))()},edit:function(e){var t=arguments,n=this;return Object(b["a"])(regeneratorRuntime.mark((function a(){var o,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:o=t.length>1&&void 0!==t[1]?t[1]:null,"delete"===e?n.$modal.confirm({okText:"确定",okType:"danger",cancelText:"取消",maskClosable:!0,content:"确定删除此商品?",onOk:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.spinning=!0,e.prev=1,e.next=4,n.$axios({method:n.$api.DELETE_GOODS.method,url:n.$api.DELETE_GOODS.url,params:{id:o.id}});case 4:n.$message.success("删除成功"),n.spinning=!1,n.getGoodsList(n.sort,n.status,1,n.formData.name),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log("删除商品失败。[edit]",e.t0),n.spinning=!1;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));function t(){return e.apply(this,arguments)}return t}()}):(r="","edit"===e&&(r=o.id),n.$router.push("/goods/edit?id="+r));case 2:case"end":return a.stop()}}),a)})))()},changeSort:function(e){this.sort=e,this.getGoodsList(this.sort,this.status,1,this.formData.name)},changeStatus:function(e){this.getGoodsList(this.sort,e,1,this.formData.name)},changeGoodsStatus:function(e,t){var n=this;return Object(b["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=null,"sort"===e?o={type:e,id:t.id,sort_order:t.sort_order}:"index"===e?o={type:e,id:t.id,is_index:t.is_index}:"sale"===e&&(o={type:e,id:t.id,is_on_sale:t.is_on_sale}),a.prev=2,a.next=5,n.$axios({method:n.$api.CHANGE_GOODS_STATUS.method,url:n.$api.CHANGE_GOODS_STATUS.url,data:o});case 5:n.getGoodsList(n.sort,n.status,n.page,n.formData.name),a.next=13;break;case 8:a.prev=8,a.t0=a["catch"](2),console.log(a.t0),n.spinning=!1,n.getGoodsList(n.sort,n.status,n.page,n.formData.name);case 13:case"end":return a.stop()}}),a,null,[[2,8]])})))()}},mounted:function(){this.getGoodsList(this.sort,this.status,1,"")}});h.render=f;t["default"]=h}}]);
//# sourceMappingURL=chunk-2d0ac97c.44464bcd.js.map