{"version":3,"sources":["webpack:///./src/components/System/Administrators.vue","webpack:///./src/components/System/Administrators.vue?56e3"],"names":["class","spinning","type","style","showAddModal","data-source","administrators","pagination","rowKey","row","id","bordered","key","title","data-index","default","record","edit","visible","width","okText","cancelText","addAdministrators","ref","model","addData","rules","addRules","label-col","wrapper-col","label","name","help","value","username","placeholder","email","disabled","showEditModal","editAdministrators","editData","editRules","data","page","defaultPageSize","hideOnSinglePage","showQuickJumper","showTotal","total","onChange","getAdministrators","required","message","trigger","min","max","methods","$axios","method","$api","GET_ADMINISTRATORS","url","params","response","list","console","log","this","Object","assign","$refs","addForm","validate","ADD_ADMINISTRATORS","administrator","msg","editForm","EDIT_ADMINISTRATORS","mounted","$encrypt","md5Encrypt","render"],"mappings":"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","file":"js/chunk-2d0deaf2.8020e7b9.js","sourcesContent":["<template>\r\n  <a-spin :spinning=\"spinning\">\r\n    <div class=\"content-box\">\r\n      <a-button type=\"primary\" style=\"margin-bottom: 14px\" @click=\"showAddModal = true\">添加新管理员</a-button>\r\n      <a-table\r\n        :data-source=\"administrators\"\r\n        :pagination=\"pagination\"\r\n        :rowKey=\"(row) => row.id\"\r\n        bordered\r\n        >\r\n        <a-table-column key=\"id\" title=\"ID\" data-index=\"id\" />\r\n        <a-table-column key=\"name\" title=\"昵称\" data-index=\"name\" />\r\n        <a-table-column key=\"username\" title=\"用户名\" data-index=\"username\" />\r\n        <a-table-column key=\"email\" title=\"邮箱地址\" data-index=\"email\" />\r\n        <a-table-column key=\"last_login_time\" title=\"最后一次登录时间\" data-index=\"last_login_time\" />\r\n        <a-table-column key=\"last_login_ip\" title=\"最后一次登录IP\" data-index=\"last_login_ip\" />\r\n        <a-table-column>\r\n          <template #default=\"{ record }\" >\r\n            <a-button type=\"primary\" style=\"margin-right: 10px\" @click=\"edit(record)\">编辑</a-button>\r\n          </template>\r\n        </a-table-column>\r\n      </a-table>\r\n    </div>\r\n  </a-spin>\r\n  <a-modal\r\n    v-model:visible=\"showAddModal\"\r\n    title=\"添加管理员\"\r\n    :width=\"650\"\r\n    okText=\"保存\"\r\n    cancelText=\"取消\"\r\n    @ok=\"addAdministrators\"\r\n  >\r\n    <a-form ref=\"addForm\" :model=\"addData\" :rules=\"addRules\" :label-col=\"{span: 4}\" :wrapper-col=\"{span: 14}\">\r\n      <a-form-item label=\"用户名\" name=\"username\" help=\"用户名一旦创建不可更改\">\r\n        <a-input v-model:value=\"addData.username\" placeholder=\"请输入用户名\"></a-input>\r\n      </a-form-item>\r\n      <a-form-item label=\"昵称\" name=\"name\">\r\n        <a-input v-model:value=\"addData.name\" placeholder=\"请输入昵称\"></a-input>\r\n      </a-form-item>\r\n      <a-form-item label=\"邮箱地址\" name=\"email\" help=\"用于找回密码\">\r\n        <a-input v-model:value=\"addData.email\" placeholder=\"请输入邮箱地址\"></a-input>\r\n      </a-form-item>\r\n      <a-form-item label=\"密码\" name=\"password\" help=\"初始密码，需登录之后才能更改密码\">\r\n        <a-input value=\"123456\" disabled></a-input>\r\n      </a-form-item>\r\n    </a-form>\r\n  </a-modal>\r\n  <a-modal\r\n    v-model:visible=\"showEditModal\"\r\n    title=\"编辑管理员\"\r\n    :width=\"650\"\r\n    okText=\"保存\"\r\n    cancelText=\"取消\"\r\n    @ok=\"editAdministrators\"\r\n  >\r\n    <a-form ref=\"editForm\" :model=\"editData\" :rules=\"editRules\" :label-col=\"{span: 4}\" :wrapper-col=\"{span: 14}\">\r\n      <a-form-item label=\"用户名\" name=\"username\" help=\"用户名不可更改\">\r\n        <a-input v-model:value=\"editData.username\" disabled></a-input>\r\n      </a-form-item>\r\n      <a-form-item label=\"昵称\" name=\"name\">\r\n        <a-input v-model:value=\"editData.name\" placeholder=\"请输入昵称\"></a-input>\r\n      </a-form-item>\r\n      <a-form-item label=\"邮箱地址\" name=\"email\" help=\"用于找回密码\">\r\n        <a-input v-model:value=\"editData.email\" placeholder=\"请输入邮箱地址\"></a-input>\r\n      </a-form-item>\r\n    </a-form>\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Administrators',\r\n  data () {\r\n    return {\r\n      spinning: false,\r\n      administrators: [],\r\n      page: 1,\r\n      pagination: {\r\n        defaultPageSize: 20,\r\n        hideOnSinglePage: true,\r\n        showQuickJumper: true,\r\n        showTotal: (total) => `共 ${total} 条`,\r\n        total: 0,\r\n        onChange: (page) => {\r\n          this.getAdministrators(page)\r\n          this.page = page\r\n        }\r\n      },\r\n      showAddModal: false,\r\n      showEditModal: false,\r\n      addData: {\r\n        id: '',\r\n        username: '',\r\n        name: '',\r\n        email: ''\r\n      },\r\n      editData: {},\r\n      addRules: {\r\n        username: [\r\n          {\r\n            required: true, message: '请输入用户名', trigger: 'blur'\r\n          },\r\n          {\r\n            min: 6, max: 16, message: '用户名长度应在 6~16 之间', trigger: 'blur'\r\n          }\r\n        ],\r\n        name: [\r\n          {\r\n            required: true, message: '请输入昵称', trigger: 'blur'\r\n          }\r\n        ],\r\n        email: [\r\n          {\r\n            required: true, message: '请输入邮箱地址', trigger: 'blur'\r\n          },\r\n          {\r\n            type: 'email', message: '请输入正确的邮箱地址', trigger: 'blur'\r\n          }\r\n        ]\r\n      },\r\n      editRules: {\r\n        name: [\r\n          {\r\n            required: true, message: '请输入昵称', trigger: 'blur'\r\n          }\r\n        ],\r\n        email: [\r\n          {\r\n            required: true, message: '请输入邮箱地址', trigger: 'blur'\r\n          },\r\n          {\r\n            type: 'email', message: '请输入正确的邮箱地址', trigger: 'blur'\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async getAdministrators (page) {\r\n      this.spinning = true\r\n      try {\r\n        const response = await this.$axios({\r\n          method: this.$api.GET_ADMINISTRATORS.method,\r\n          url: this.$api.GET_ADMINISTRATORS.url,\r\n          params: {\r\n            page\r\n          }\r\n        })\r\n        this.administrators = response.data.list\r\n        this.spinning = false\r\n      } catch (err) {\r\n        console.log(err)\r\n        this.spinning = false\r\n      }\r\n    },\r\n    edit (data) {\r\n      this.editData = Object.assign({}, data)\r\n      this.showEditModal = true\r\n    },\r\n    async addAdministrators () {\r\n      try {\r\n        await this.$refs.addForm.validate()\r\n        this.spinning = true\r\n        try {\r\n          await this.$axios({\r\n            method: this.$api.ADD_ADMINISTRATORS.method,\r\n            url: this.$api.ADD_ADMINISTRATORS.url,\r\n            data: {\r\n              administrator: this.addData\r\n            }\r\n          })\r\n          this.spinning = false\r\n          this.showAddModal = false\r\n          this.getAdministrators(this.page)\r\n        } catch (err) {\r\n          console.log(err)\r\n          this.spinning = false\r\n          if (err.msg && err.msg === '用户名已存在') {\r\n            this.addData.username = ''\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.log('表单验证失败', err)\r\n      }\r\n    },\r\n    async editAdministrators () {\r\n      try {\r\n        await this.$refs.editForm.validate()\r\n        this.spinning = true\r\n        try {\r\n          await this.$axios({\r\n            method: this.$api.EDIT_ADMINISTRATORS.method,\r\n            url: this.$api.EDIT_ADMINISTRATORS.url,\r\n            data: {\r\n              administrator: this.editData\r\n            }\r\n          })\r\n          this.spinning = false\r\n          this.showEditModal = false\r\n          this.getAdministrators(this.page)\r\n        } catch (err) {\r\n          console.log(err)\r\n          this.spinning = false\r\n        }\r\n      } catch (err) {\r\n        console.log('表单验证失败', err)\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getAdministrators(1)\r\n    const data = this.$encrypt.md5Encrypt(this.$encrypt.md5Encrypt('123456'))\r\n    console.log(data)\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./Administrators.vue?vue&type=template&id=14f8165a\"\nimport script from \"./Administrators.vue?vue&type=script&lang=js\"\nexport * from \"./Administrators.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}