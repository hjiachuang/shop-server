(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0de560"],{"84e3":function(e,r,t){"use strict";t.r(r);var a=t("7a23"),n={class:"content-box"},o=Object(a["createTextVNode"])("保存");function s(e,r,t,s,c,u){var d=Object(a["resolveComponent"])("a-input-password"),i=Object(a["resolveComponent"])("a-form-item"),m=Object(a["resolveComponent"])("a-button"),l=Object(a["resolveComponent"])("a-form"),w=Object(a["resolveComponent"])("a-spin");return Object(a["openBlock"])(),Object(a["createBlock"])(w,{spinning:c.spinning},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])("div",n,[Object(a["createVNode"])(l,{ref:"form",model:c.formData,rules:c.rules},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(i,{label:"旧密码",name:"oldPassword"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(d,{value:c.formData.oldPassword,"onUpdate:value":r[1]||(r[1]=function(e){return c.formData.oldPassword=e}),placeholder:"请输入旧密码",onKeyup:Object(a["withKeys"])(u.changePassword,["enter"])},null,8,["value","onKeyup"])]})),_:1}),Object(a["createVNode"])(i,{label:"新密码",name:"newPassword"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(d,{value:c.formData.newPassword,"onUpdate:value":r[2]||(r[2]=function(e){return c.formData.newPassword=e}),placeholder:"请输入新密码",onKeyup:Object(a["withKeys"])(u.changePassword,["enter"])},null,8,["value","onKeyup"])]})),_:1}),Object(a["createVNode"])(i,{label:"确认密码",name:"comfirmPassword"},{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(d,{value:c.formData.comfirmPassword,"onUpdate:value":r[3]||(r[3]=function(e){return c.formData.comfirmPassword=e}),placeholder:"请再次输入新密码",onKeyup:Object(a["withKeys"])(u.changePassword,["enter"])},null,8,["value","onKeyup"])]})),_:1}),Object(a["createVNode"])(i,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(m,{type:"primary",style:{"margin-right":"14px"},onClick:u.changePassword},{default:Object(a["withCtx"])((function(){return[o]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules"])])]})),_:1},8,["spinning"])}var c=t("1da1"),u=(t("96cf"),{name:"Password",data:function(){return{spinning:!1,formData:{oldPassword:"",newPassword:"",comfirmPassword:""},rules:{oldPassword:[{required:!0,message:"请输入旧密码",trigger:"blur"},{min:6,max:16,message:"密码长度应在 6~16 之间",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:16,message:"密码长度应在 6~16 之间",trigger:"blur"}],comfirmPassword:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{min:6,max:16,message:"密码长度应在 6~16 之间",trigger:"blur"}]}}},methods:{changePassword:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var t,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t=e.$storage.getItem("userinfo","user"),!t){r.next=29;break}return r.prev=2,r.next=5,e.$refs.form.validate();case 5:if(e.formData.newPassword===e.formData.comfirmPassword){r.next=7;break}return r.abrupt("return",e.$message.error("新密码和确认密码不一致"));case 7:if(e.formData.newPassword!==e.formData.oldPassword){r.next=9;break}return r.abrupt("return",e.$message.error("旧密码和新密码不能一致"));case 9:return e.spinning=!0,r.prev=10,a=e.$encrypt.aesEncrypt(JSON.stringify({username:t.username,oldPassword:e.$encrypt.passwordEncrypt(e.formData.oldPassword),newPassword:e.$encrypt.passwordEncrypt(e.formData.newPassword),comfirmPassword:e.$encrypt.passwordEncrypt(e.formData.comfirmPassword)})),r.next=14,e.$axios({method:e.$api.CHANGE_PASSWORD.method,url:e.$api.CHANGE_PASSWORD.url,data:{data:a}});case 14:e.spinning=!1,r.next=22;break;case 17:r.prev=17,r.t0=r["catch"](10),console.log("发送ajax请求失败",r.t0),e.spinning=!1,r.t0.msg&&"旧密码错误"===r.t0.msg?e.formData.oldPassword="":r.t0.msg&&"新密码和确认密码不一致"===r.t0.msg&&(e.formData.newPassword="",e.formData.comfirmPassword="");case 22:r.next=27;break;case 24:r.prev=24,r.t1=r["catch"](2),console.log("表单验证失败",r.t1);case 27:r.next=30;break;case 29:e.$message.error("系统错误");case 30:case"end":return r.stop()}}),r,null,[[2,24],[10,17]])})))()}}});u.render=s;r["default"]=u}}]);
//# sourceMappingURL=chunk-2d0de560.cfdf389c.js.map