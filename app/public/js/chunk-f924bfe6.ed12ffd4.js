(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f924bfe6"],{"40a7":function(e,t,n){"use strict";var r={today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"},a={placeholder:"请选择时间"},o=a;function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}var c={lang:i({placeholder:"请选择日期",rangePlaceholder:["开始日期","结束日期"]},r),timePickerLocale:i({},o)};c.lang.ok="确 定";t["a"]=c},"65f1":function(e,t,n){"use strict";n.r(t);n("9911");var r=n("7a23"),a={class:"content-box"},o={class:"clearfix"},i={key:0},c=Object(r["createVNode"])("div",{class:"ant-upload-text"},"Upload",-1),l=Object(r["createVNode"])("small",null,"图片尺寸要求： 宽度750，高度300",-1),u=Object(r["createTextVNode"])("商品ID"),d=Object(r["createTextVNode"])("链接"),s=Object(r["createTextVNode"])("选择关联商品"),p=Object(r["createTextVNode"])("保存"),m=Object(r["createTextVNode"])("取消"),b=Object(r["createTextVNode"])("选择");function v(e,t,n,v,f,O){var j=Object(r["resolveComponent"])("plus-outlined"),g=Object(r["resolveComponent"])("a-upload"),h=Object(r["resolveComponent"])("a-form-item"),w=Object(r["resolveComponent"])("a-radio"),_=Object(r["resolveComponent"])("a-radio-group"),x=Object(r["resolveComponent"])("a-input"),V=Object(r["resolveComponent"])("a-button"),k=Object(r["resolveComponent"])("a-date-picker"),C=Object(r["resolveComponent"])("a-input-number"),N=Object(r["resolveComponent"])("a-switch"),y=Object(r["resolveComponent"])("a-form"),T=Object(r["resolveComponent"])("a-spin"),S=Object(r["resolveComponent"])("a-modal"),D=Object(r["resolveComponent"])("a-table-column"),E=Object(r["resolveComponent"])("a-image"),P=Object(r["resolveComponent"])("a-table");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(T,{spinning:f.spinning},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",a,[Object(r["createVNode"])(y,{"label-col":{span:24},"wrapper-col":{span:24},ref:"form",model:f.advertisement},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,{label:"商品图片",name:"list_pic_url"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",o,[Object(r["createVNode"])(g,{"list-type":"picture-card","file-list":f.list_pic_url,"onUpdate:file-list":t[1]||(t[1]=function(e){return f.list_pic_url=e}),"before-upload":O.beforeUpload,customRequest:O.uploadImage,remove:function(){return f.advertisement.image_url="",!0},onPreview:O.handlePreview},{default:Object(r["withCtx"])((function(){return[f.list_pic_url.length<1?(Object(r["openBlock"])(),Object(r["createBlock"])("div",i,[Object(r["createVNode"])(j),c])):Object(r["createCommentVNode"])("",!0)]})),_:1},8,["file-list","before-upload","customRequest","remove","onPreview"])]),l]})),_:1}),Object(r["createVNode"])(h,{label:"商品类型",name:"link_type"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(_,{value:f.advertisement.link_type,"onUpdate:value":t[2]||(t[2]=function(e){return f.advertisement.link_type=e})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(w,{value:0},{default:Object(r["withCtx"])((function(){return[u]})),_:1}),Object(r["createVNode"])(w,{value:1},{default:Object(r["withCtx"])((function(){return[d]})),_:1})]})),_:1},8,["value"])]})),_:1}),0===f.advertisement.link_type?(Object(r["openBlock"])(),Object(r["createBlock"])(h,{key:0,label:"商品ID",name:"goods_id"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(x,{value:f.advertisement.goods_id,"onUpdate:value":t[3]||(t[3]=function(e){return f.advertisement.goods_id=e}),placeholder:"请输入商品ID"},null,8,["value"]),Object(r["createVNode"])(V,{type:"primary",onClick:t[4]||(t[4]=function(){f.modalVisible=!0,O.getGoodsSimpleList()})},{default:Object(r["withCtx"])((function(){return[s]})),_:1})]})),_:1})):Object(r["createCommentVNode"])("",!0),1===f.advertisement.link_type?(Object(r["openBlock"])(),Object(r["createBlock"])(h,{key:1,label:"广告链接",name:"link"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(x,{value:f.advertisement.link,"onUpdate:value":t[5]||(t[5]=function(e){return f.advertisement.link=e}),placeholder:"请输入广告链接"},null,8,["value"])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(h,{label:"结束时间",name:"end_time"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(k,{value:f.advertisement.end_time,"onUpdate:value":t[6]||(t[6]=function(e){return f.advertisement.end_time=e}),valueFormat:"YYYY-MM-DD HH:mm:ss","show-time":"",placeholder:"请选择日期时间",locale:f.locale},null,8,["value","locale"])]})),_:1}),Object(r["createVNode"])(h,{label:"排序",name:"sort_order"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(C,{value:f.advertisement.sort_order,"onUpdate:value":t[7]||(t[7]=function(e){return f.advertisement.sort_order=e}),min:1,max:100},null,8,["value"])]})),_:1}),Object(r["createVNode"])(h,{label:"启用广告",name:"enabled"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(N,{checked:f.advertisement.enabled,"onUpdate:checked":t[8]||(t[8]=function(e){return f.advertisement.enabled=e})},null,8,["checked"])]})),_:1}),Object(r["createVNode"])(h,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(V,{type:"primary",style:{"margin-right":"10px"},onClick:O.submitAdvertisement},{default:Object(r["withCtx"])((function(){return[p]})),_:1},8,["onClick"]),Object(r["createVNode"])(V,{onClick:t[9]||(t[9]=function(t){return e.$router.go(-1)})},{default:Object(r["withCtx"])((function(){return[m]})),_:1})]})),_:1})]})),_:1},8,["model"])])]})),_:1},8,["spinning"]),Object(r["createVNode"])(S,{visible:f.previewVisible,footer:null,onCancel:t[10]||(t[10]=function(e){return f.previewVisible=!1})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("img",{alt:"预览图片",style:{width:"100%"},src:f.previewImage},null,8,["src"])]})),_:1},8,["visible"]),Object(r["createVNode"])(S,{visible:f.modalVisible,"onUpdate:visible":t[11]||(t[11]=function(e){return f.modalVisible=e}),closable:!1,centered:"",destroyOnClose:"",width:700,footer:null,bodyStyle:{padding:"12px"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(P,{"data-source":f.modalTableData,pagination:f.tablePagination,scroll:{y:640},rowKey:function(e){return e.id}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(D,{key:"id",title:"ID","data-index":"id"}),Object(r["createVNode"])(D,{key:"img_url",title:"商品图片","data-index":"img_url"},{default:Object(r["withCtx"])((function(e){var t=e.text;return[Object(r["createVNode"])(E,{src:t,width:80,height:80},null,8,["src"])]})),_:1}),Object(r["createVNode"])(D,{key:"name",title:"商品名称","data-index":"name",width:240}),Object(r["createVNode"])(D,{title:"操作"},{default:Object(r["withCtx"])((function(e){var t=e.record;return[Object(r["createVNode"])(V,{type:"danger",onClick:function(e){return O.select(t)},disabled:t.id===f.advertisement.goods_id},{default:Object(r["withCtx"])((function(){return[b]})),_:2},1032,["onClick","disabled"])]})),_:1})]})),_:1},8,["data-source","pagination","rowKey"])]})),_:1},8,["visible"])],64)}var f=n("1da1"),O=(n("d3b7"),n("96cf"),n("40a7")),j={name:"EditAdvertisement",data:function(){var e=this;return{spinning:!1,advertisement:{},list_pic_url:[],previewVisible:!1,previewImage:null,locale:O["a"],modalVisible:!1,modalTableData:[],tablePagination:{defaultPageSize:20,hideOnSinglePage:!0,showQuickJumper:!0,showTotal:function(e){return"共 ".concat(e," 条")},total:0,onChange:function(t){e.getGoodsSimpleList(t),e.page=t}}}},methods:{getDetail:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.spinning=!0,n.prev=1,n.next=4,t.$axios({method:t.$api.GET_ADVERTISEMENT_DETAIL.method,url:t.$api.GET_ADVERTISEMENT_DETAIL.url,params:{id:e}});case 4:r=n.sent,t.advertisement=r.data.advertisement,t.list_pic_url=[{uid:"1",name:"list_pic",status:"done",url:r.data.advertisement.image_url}],t.spinning=!1,n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](1),console.log(n.t0),t.spinning=!1;case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))()},getGoodsSimpleList:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.spinning=!0,n.prev=1,n.next=4,t.$axios({method:t.$api.GET_GOODS_SIMPLE_LIST.method,url:t.$api.GET_GOODS_SIMPLE_LIST.url,params:{page:e}});case 4:r=n.sent,t.modalTableData=r.data.list,t.tablePagination.total=r.data.total,t.spinning=!1,n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](1),console.log(n.t0),t.spinning=!1;case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))()},getBase64:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)}})));case 1:case"end":return t.stop()}}),t)})))()},handlePreview:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.url||e.preview){n.next=4;break}return n.next=3,t.getBase64(e.originFileObj);case 3:e.preview=n.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return n.stop()}}),n)})))()},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||this.$message.error("只允许上传JPG和PNG格式的图片");var n=e.size/1024/1024<2;return n||this.$message.error("只允许上传小于2M的图片"),t&&n},uploadImage:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.file,a=new FormData,a.append("file",r),t.spinning=!0,n.prev=4,n.next=7,t.$axios({method:t.$api.POST_UPLOAD_IMAGE.method,url:t.$api.POST_UPLOAD_IMAGE.url,data:a,onUploadProgress:function(t){var n=t.loaded/t.total*100|0;e.onProgress({percent:n})}});case 7:o=n.sent,e.onSuccess(),t.spinning=!1,t.advertisement.image_url=o.data.url,n.next=19;break;case 13:return n.prev=13,n.t0=n["catch"](4),console.log(n.t0),e.onError(),t.spinning=!1,n.abrupt("return","");case 19:case"end":return n.stop()}}),n,null,[[4,13]])})))()},select:function(e){this.advertisement.goods_id=e.id,this.modalVisible=!1},submitAdvertisement:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.spinning=!0,t.prev=1,t.next=4,e.$axios({method:e.$api.SAVE_ADVERTISEMENT.method,url:e.$api.SAVE_ADVERTISEMENT.url,data:{advertisement:e.advertisement}});case 4:e.spinning=!1,setTimeout((function(){e.$router.go(-1)}),1500),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0),e.spinning=!1;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},mounted:function(){var e=this.$route.query.id;e?this.getDetail(e):this.advertisement={id:"",image_url:"",enabled:!0,end_time:"",goods_id:"",sort_order:1,link:"",link_type:0}}};j.render=v;t["default"]=j},"857a":function(e,t,n){var r=n("1d80"),a=/"/g;e.exports=function(e,t,n,o){var i=String(r(e)),c="<"+t;return""!==n&&(c+=" "+n+'="'+String(o).replace(a,"&quot;")+'"'),c+">"+i+"</"+t+">"}},9911:function(e,t,n){"use strict";var r=n("23e7"),a=n("857a"),o=n("af03");r({target:"String",proto:!0,forced:o("link")},{link:function(e){return a(this,"a","href",e)}})},af03:function(e,t,n){var r=n("d039");e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}}}]);
//# sourceMappingURL=chunk-f924bfe6.ed12ffd4.js.map