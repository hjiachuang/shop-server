{"version":3,"sources":["webpack:///./src/components/Shop/ExpressSettings.vue","webpack:///./src/components/Shop/ExpressSettings.vue?6829","webpack:///./src/components/Shop/ExpressSettings.vue?9707"],"names":["class","style","spinning","model","settings","rules","settingsRules","ref","hideRequiredMark","label-col","wrapper-col","label","name","value","Name","placeholder","Tel","regionOptions","options","region","displayRender","labels","selectedOptions","index","key","length","Address","checked","autoDelivery","type","saveSettings","data-source","express","pagination","rowKey","row","id","title","expressEdit","data-index","width","default","enabled","record","changeStatus","data","required","trigger","message","methods","getExpressSettings","$axios","method","$api","GET_EXPRESS_SETTINGS","url","response","push","province_id","city_id","district_id","console","log","getAllRegion","GET_ALL_REGION","$refs","settingsRef","validate","POST_SET_SETTINGS","tel","address","$router","status","this","$modal","confirm","okText","okType","cancelText","maskClosable","content","onOk","GET_CHANGE_EXPRESS_STATUS","params","mounted","render","__scopeId"],"mappings":"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","file":"js/chunk-801297d0.e17f718d.js","sourcesContent":["<template>\r\n  <a-spin :spinning=\"spinning\">\r\n    <div class=\"shop-express-settings\">\r\n      <a-form :model=\"settings\" :rules=\"settingsRules\" ref=\"settingsRef\" hideRequiredMark :label-col=\"{span: 24}\" :wrapper-col=\"{span: 24}\">\r\n        <a-form-item label=\"寄件人\" name=\"Name\">\r\n          <a-input v-model:value=\"settings.Name\" placeholder=\"请输入寄件人姓名\" />\r\n        </a-form-item>\r\n        <a-form-item label=\"联系电话\" name=\"Tel\">\r\n          <a-input v-model:value=\"settings.Tel\" placeholder=\"请输入寄件人联系电话\" />\r\n        </a-form-item>\r\n        <a-form-item label=\"省份\">\r\n          <a-cascader v-model:value=\"settings.regionOptions\" :options=\"region\" style=\"width: 100%\" placeholder=\"请选择寄件人地址\">\r\n            <template #displayRender=\"{ labels, selectedOptions }\">\r\n              <span v-for=\"(label, index) in labels\" :key=\"selectedOptions[index].value\">\r\n                <span v-if=\"index === labels.length - 1\">\r\n                  {{ label }}\r\n                </span>\r\n                <span v-else>{{ label }} /</span>\r\n              </span>\r\n            </template>\r\n          </a-cascader>\r\n        </a-form-item>\r\n        <a-form-item label=\"详细地址\" name=\"Address\">\r\n          <a-input v-model:value=\"settings.Address\" placeholder=\"请输入具体地址\" />\r\n        </a-form-item>\r\n        <a-form-item>\r\n          <a-checkbox v-model:checked=\"settings.autoDelivery\">打印后自动发货</a-checkbox>\r\n        </a-form-item>\r\n        <a-form-item>\r\n          <a-button type=\"primary\" @click=\"saveSettings\">保存</a-button>\r\n        </a-form-item>\r\n      </a-form>\r\n      <a-divider />\r\n      <a-table\r\n        :data-source=\"express\"\r\n        :pagination=\"false\"\r\n        :rowKey=\"(row) => row.id\"\r\n        >\r\n        <template #title>\r\n          <h3>快递公司列表</h3>\r\n          <a-button type=\"primary\" @click=\"expressEdit('add')\">添加</a-button>\r\n        </template>\r\n        <a-table-column key=\"id\" title=\"ID\" data-index=\"id\" :width=\"80\" />\r\n        <a-table-column key=\"name\" title=\"名称\" data-index=\"name\" />\r\n        <a-table-column key=\"code\" title=\"代号\" data-index=\"code\" />\r\n        <a-table-column key=\"CustomerName\" title=\"客户编号\" data-index=\"CustomerName\" />\r\n        <a-table-column key=\"MonthCode\" title=\"月结账号\" data-index=\"MonthCode\" />\r\n        <a-table-column key=\"enabled\" title=\"状态\" data-index=\"enabled\">\r\n          <template #default=\"{ text: enabled }\">\r\n            <span v-if=\"enabled === 1\" style=\"color: rgb(102, 177, 255)\">使用中</span>\r\n            <span v-else>未使用</span>\r\n          </template>\r\n        </a-table-column>\r\n        <a-table-column key=\"action\" title=\"操作\">\r\n          <template #default=\"{ record }\">\r\n            <a-button type=\"primary\" @click=\"expressEdit('edit', record)\">编辑</a-button>\r\n            <a-button type=\"danger\" @click=\"changeStatus(record)\" style=\"margin-left: 20px;\">{{record.enabled === 1 ? '停用' : '启用' }}</a-button>\r\n          </template>\r\n        </a-table-column>\r\n      </a-table>\r\n    </div>\r\n  </a-spin>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ShopExpressSettings',\r\n  data () {\r\n    return {\r\n      spinning: false,\r\n      region: [],\r\n      regionOptions: [],\r\n      settingsRules: {\r\n        Name: [\r\n          {\r\n            required: true,\r\n            trigger: 'change',\r\n            message: '请输入寄件人姓名'\r\n          }\r\n        ],\r\n        Tel: [\r\n          {\r\n            required: true,\r\n            trigger: 'change',\r\n            message: '请输入寄件人联系电话'\r\n          }\r\n        ],\r\n        Address: [\r\n          {\r\n            required: true,\r\n            trigger: 'change',\r\n            message: '请输入具体地址'\r\n          }\r\n        ]\r\n      },\r\n      settings: {},\r\n      express: []\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取快递设置页内容\r\n    async getExpressSettings () {\r\n      this.spinning = true\r\n      try {\r\n        const response = await this.$axios({\r\n          method: this.$api.GET_EXPRESS_SETTINGS.method,\r\n          url: this.$api.GET_EXPRESS_SETTINGS.url\r\n        })\r\n        this.settings = response.data.settings\r\n        this.settings.autoDelivery === 1 ? this.settings.autoDelivery = true : this.settings.autoDelivery = false\r\n        this.express = response.data.express\r\n        this.settings.regionOptions = []\r\n        this.settings.regionOptions.push(\r\n          response.data.settings.province_id,\r\n          response.data.settings.city_id,\r\n          response.data.settings.district_id\r\n        )\r\n        this.spinning = false\r\n      } catch (err) {\r\n        console.log('获取快递设置页内容失败。[getExpressSettings]', err)\r\n        this.spinning = false\r\n      }\r\n    },\r\n    // 获取所有城市列表\r\n    async getAllRegion () {\r\n      this.spinning = true\r\n      try {\r\n        const response = await this.$axios({\r\n          method: this.$api.GET_ALL_REGION.method,\r\n          url: this.$api.GET_ALL_REGION.url\r\n        })\r\n        this.region = response.data.region\r\n        this.spinning = false\r\n      } catch (err) {\r\n        console.log('获取所有城市列表失败。[getAllRegion]', err)\r\n        this.spinning = false\r\n      }\r\n    },\r\n    // 保存设置\r\n    async saveSettings () {\r\n      this.spinning = true\r\n      try {\r\n        await this.$refs.settingsRef.validate()\r\n        await this.$axios({\r\n          method: this.$api.POST_SET_SETTINGS.method,\r\n          url: this.$api.POST_SET_SETTINGS.url,\r\n          data: {\r\n            name: this.settings.Name,\r\n            tel: this.settings.Tel,\r\n            address: this.settings.Address,\r\n            province_id: this.settings.regionOptions[0],\r\n            city_id: this.settings.regionOptions[1],\r\n            district_id: this.settings.regionOptions[2],\r\n            autoDelivery: this.settings.autoDelivery === true ? 1 : 0\r\n          }\r\n        })\r\n        this.getExpressSettings()\r\n        this.spinning = false\r\n      } catch (err) {\r\n        console.log('保存设置失败。[saveSettings]', err)\r\n        this.spinning = false\r\n      }\r\n    },\r\n    // 跳转编辑页面\r\n    async expressEdit (type, data = null) {\r\n      let id = ''\r\n      if (type === 'edit') {\r\n        id = data.id\r\n      }\r\n      this.$router.push('/express/edit?id=' + id)\r\n    },\r\n    // 启用 / 停用快递\r\n    changeStatus (data) {\r\n      const status = data.enabled === 1 ? '停用' : '启用'\r\n      this.$modal.confirm({\r\n        okText: '确定',\r\n        okType: 'danger',\r\n        cancelText: '取消',\r\n        maskClosable: true,\r\n        content: `确定${status}  ${data.name} ?`,\r\n        onOk: async () => {\r\n          this.spinning = true\r\n          try {\r\n            await this.$axios({\r\n              method: this.$api.GET_CHANGE_EXPRESS_STATUS.method,\r\n              url: this.$api.GET_CHANGE_EXPRESS_STATUS.url,\r\n              params: {\r\n                id: data.id,\r\n                enabled: !data.enabled\r\n              }\r\n            })\r\n            this.getExpressSettings()\r\n            this.spinning = false\r\n          } catch (err) {\r\n            console.log('改变快递公司使用状态失败。[changeStatus]', err)\r\n            this.spinning = false\r\n          }\r\n        }\r\n      })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getExpressSettings()\r\n    this.getAllRegion()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.shop-express-settings {\r\n  background: #fff;\r\n  padding: 20px;\r\n}\r\n</style>\r\n","import { render } from \"./ExpressSettings.vue?vue&type=template&id=f78d6184&scoped=true\"\nimport script from \"./ExpressSettings.vue?vue&type=script&lang=js\"\nexport * from \"./ExpressSettings.vue?vue&type=script&lang=js\"\n\nimport \"./ExpressSettings.vue?vue&type=style&index=0&id=f78d6184&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-f78d6184\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExpressSettings.vue?vue&type=style&index=0&id=f78d6184&lang=scss&scoped=true\""],"sourceRoot":""}