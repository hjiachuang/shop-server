{"version":3,"sources":["webpack:///./src/components/Shop/Advertisement.vue","webpack:///./src/components/Shop/Advertisement.vue?76ec"],"names":["class","spinning","type","$router","push","data-source","advertisement","pagination","tablePagination","rowKey","row","id","style","key","title","data-index","width","default","image","src","fallback","preview","alt","height","record","value","sort_order","min","enabled","checked","changeStatus","deleteAd","name","data","defaultPageSize","hideOnSinglePage","showQuickJumper","showTotal","total","onChange","page","getAd","methods","$axios","method","$api","GET_ADVERTISEMENT","url","params","response","console","log","CHANGE_ADVERTISEMENT_STATE","state","DELETE_ADVERTISEMENT","mounted","this","render"],"mappings":"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","file":"js/chunk-2d0a4f81.ea06b83e.js","sourcesContent":["<template>\r\n  <a-spin :spinning=\"spinning\">\r\n    <div class=\"content-box\">\r\n      <a-button type=\"primary\" @click=\"$router.push('/advertisement/edit/')\">添加广告</a-button>\r\n      <a-table\r\n      :data-source=\"advertisement\"\r\n      :pagination=\"tablePagination\"\r\n      :rowKey=\"(row) => row.id\"\r\n      style=\"margin-top: 10px\"\r\n    >\r\n      <a-table-column key=\"id\" title=\"ID\" data-index=\"id\" :width=\"80\" />\r\n      <a-table-column key=\"image\" title=\"图片\" data-index=\"image_url\">\r\n        <template #default=\"{ text: image }\">\r\n          <a-image\r\n            :src=\"image\"\r\n            fallback=\"/images/fallback.png\"\r\n            :preview=\"false\"\r\n            alt=\"头像\"\r\n            :width=\"60\"\r\n            :height=\"60\"\r\n          ></a-image>\r\n        </template>\r\n      </a-table-column>\r\n      <a-table-column key=\"goods_id\" title=\"关联商品\" data-index=\"goods_id\" />\r\n      <a-table-column key=\"end_time\" title=\"结束时间\" data-index=\"end_time\" />\r\n      <a-table-column key=\"sort_order\" title=\"排序\">\r\n        <template #default=\"{ record }\">\r\n          <a-input-number v-model:value=\"record.sort_order\" :min=\"1\"></a-input-number>\r\n        </template>\r\n      </a-table-column>\r\n      <a-table-column key=\"enabled\" title=\"状态\">\r\n        <template #default=\"{ record }\">\r\n          {{record.enabled === true? '启用': '禁用'}}\r\n        </template>\r\n      </a-table-column>\r\n      <a-table-column key=\"enabledSwitch\" title=\"切换状态\">\r\n        <template #default=\"{ record }\">\r\n          <a-switch v-model:checked=\"record.enabled\" @change=\"changeStatus(record)\"></a-switch>\r\n        </template>\r\n      </a-table-column>\r\n      <a-table-column key=\"action\" title=\"操作\">\r\n        <template #default=\"{ record }\">\r\n          <a-button type=\"primary\" @click=\"$router.push(`/advertisement/edit?id=${record.id}`)\">编辑</a-button>\r\n          <a-button type=\"danger\" @click=\"deleteAd(record)\" style=\"margin-left: 10px\">删除</a-button>\r\n        </template>\r\n      </a-table-column>\r\n    </a-table>\r\n    </div>\r\n  </a-spin>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Advertisement',\r\n  data () {\r\n    return {\r\n      spinning: false,\r\n      advertisement: [],\r\n      tablePagination: {\r\n        defaultPageSize: 20,\r\n        hideOnSinglePage: true,\r\n        showQuickJumper: true,\r\n        showTotal: (total) => `共 ${total} 条`,\r\n        total: 0,\r\n        onChange: (page) => this.getAd(page)\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async getAd (page) {\r\n      this.spinning = true\r\n      try {\r\n        const response = await this.$axios({\r\n          method: this.$api.GET_ADVERTISEMENT.method,\r\n          url: this.$api.GET_ADVERTISEMENT.url,\r\n          params: {\r\n            page\r\n          }\r\n        })\r\n        this.advertisement = response.data.advertisement\r\n        this.tablePagination.total = response.data.total\r\n        this.spinning = false\r\n      } catch (err) {\r\n        console.log(err)\r\n        this.spinning = false\r\n      }\r\n    },\r\n    async changeStatus (data) {\r\n      this.spinning = true\r\n      try {\r\n        await this.$axios({\r\n          method: this.$api.CHANGE_ADVERTISEMENT_STATE.method,\r\n          url: this.$api.CHANGE_ADVERTISEMENT_STATE.url,\r\n          data: {\r\n            id: data.id,\r\n            state: data.enabled\r\n          }\r\n        })\r\n        this.spinning = false\r\n      } catch (err) {\r\n        console.log(err)\r\n        this.spinning = false\r\n      }\r\n    },\r\n    async deleteAd (data) {\r\n      this.spinning = true\r\n      try {\r\n        await this.$axios({\r\n          method: this.$api.DELETE_ADVERTISEMENT.method,\r\n          url: this.$api.DELETE_ADVERTISEMENT.url,\r\n          data: {\r\n            id: data.id\r\n          }\r\n        })\r\n        this.spinning = false\r\n        this.getAd(1)\r\n      } catch (err) {\r\n        console.log(err)\r\n        this.spinning = false\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getAd(1)\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./Advertisement.vue?vue&type=template&id=54ad6458\"\nimport script from \"./Advertisement.vue?vue&type=script&lang=js\"\nexport * from \"./Advertisement.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}